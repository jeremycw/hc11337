C:\Documents and Settings\Jeremy\My Documents\code\java\HC11337\workspace\cs3813as2q3.lst - generated by MGTEK Assembler ASM11 V1.22 Build 137 for WIN32 (x86) - Tue Mar 18 16:39:00 2008

    1:          =00000000                          ORG $0000
    2:     0000 00 10                  addrX   FCB     $00,$10 ;ADDR OF THE FIRST NUMBER
    3:     0002 00 20                  addrY   FCB     $00,$20 ;ADDR OF THE SECND NUMBER
    4:     0004 00 30                  addrZ   FCB     $00,$30 ;ADDR OF THE RESULT
    5:     0006 00 0A                  N       FCB     $00,$0A ;NUMBER OF BYTES IS TEN
    6:          =00000010                      ORG     $0010
    7:     0010 01 FF FF FF FF FF              FCB     $01,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$80
           0016 FF FF FF 80 
    8:          =00000020                      ORG     $0020
    9:     0020 01 00 00 00 00 00              FCB     $01,$00,$00,$00,$00,$00,$00,$00,$00,$80
           0026 00 00 00 80 
   10:          =00000030                      ORG     $0030
   11:     0030 99 99 99 99 99 99              FCB     $99,$99,$99,$99,$99,$99,$99,$99,$99,$99
           0036 99 99 99 99 
   12:                                 
   13:     003A 00 00                  indexX  FCB     $00,$00
   14:     003C 00 00                  indexY  FCB     $00,$00
   15:     003E 00 00                  indexZ  FCB     $00,$00
   16:     0040 00 00                  counter FCB     $00,$00
   17:                                 
   18:          =0000C000                      ORG $C000
   19:     C000 DE 06                          LDX N
   20:     C002 3C                             PSHX
   21:     C003 DE 04                          LDX addrZ
   22:     C005 3C                             PSHX
   23:     C006 DE 02                          LDX addrY
   24:     C008 3C                             PSHX
   25:     C009 DE 00                          LDX addrX
   26:     C00B 3C                             PSHX
   27:     C00C BD F00E                        JSR S1
   28:     C00F 20 FE                  LUE     BRA LUE
   29:                                 
   30:          =0000F000                      ORG $F000
   31:     F000 00 00 00 00 00 00      CPUIMG  FCB $00,$00,$00,$00,$00,$00
   32:     F006 00 00 00 00 00 00      PARAMS  FCB $00,$00,$00,$00,$00,$00,$00,$00
           F00C 00 00 
   33:                                         ;CREATE IMG OF THE CPU
   34:     F00E FF F000                S1      STX CPUIMG
   35:     F011 CE F000                        LDX #CPUIMG
   36:     F014 A7 02                          STAA 2,X
   37:     F016 E7 03                          STAB 3,X
   38:     F018 1AEF 04                        STY 4,X
   39:                                 
   40:     F01B 38                             PULX ;TAKE PC OF THE STACK
   41:     F01C 18CE F006                      LDY #PARAMS
   42:                                         ;STORE ADDR1 TO MEM
   43:     F020 32                             PULA
   44:     F021 33                             PULB
   45:     F022 18ED 00                        STD Y
   46:                                         ;STORE ADDR2 TO MEM
   47:     F025 32                             PULA
   48:     F026 33                             PULB
   49:     F027 18ED 02                        STD 2,Y
   50:                                         ;STORE ADDR3 TO MEM
   51:     F02A 32                             PULA
   52:     F02B 33                             PULB
   53:     F02C 18ED 04                        STD 4,Y
   54:                                         ;STORE N TO MEM
   55:     F02F 32                             PULA
   56:     F030 33                             PULB
   57:     F031 18ED 06                        STD 6,Y
   58:                                 
   59:     F034 3C                             PSHX ;PUT PC ON STACK
   60:                                 
   61:     F035 CDEE 06                        LDX 6,Y
   62:     F038 DF 40                          STX counter
   63:                                 
   64:     F03A 18EC 00                        LDD Y
   65:     F03D D3 06                          ADDD N
   66:     F03F 83 0001                        SUBD #$01
   67:     F042 DD 3A                          STD indexX
   68:                                 
   69:     F044 18EC 02                        LDD 2,Y
   70:     F047 D3 06                          ADDD N
   71:     F049 83 0001                        SUBD #$01
   72:     F04C DD 3C                          STD indexY
   73:                                 
   74:     F04E 18EC 04                        LDD 4,Y
   75:     F051 D3 06                          ADDD N
   76:     F053 83 0001                        SUBD #$01
   77:     F056 DD 3E                          STD indexZ
   78:                                 
   79:     F058 0C                             CLC
   80:                                 
   81:                                 
   82:     F059 DE 3A                  loop    LDX indexX
   83:     F05B A6 00                          LDAA 0,X
   84:     F05D DE 3C                          LDX indexY
   85:     F05F A9 00                          ADCA 0,X
   86:     F061 DE 3E                          LDX indexZ
   87:     F063 A7 00                          STAA 0,X
   88:                                 
   89:     F065 CE 003A                        LDX #indexX
   90:     F068 3C                             PSHX
   91:     F069 BD F090                        JSR S2
   92:                                 
   93:     F06C CE 003C                        LDX #indexY
   94:     F06F 3C                             PSHX
   95:     F070 BD F090                        JSR S2
   96:                                 
   97:     F073 CE 003E                        LDX #indexZ
   98:     F076 3C                             PSHX
   99:     F077 BD F090                        JSR S2
  100:                                 
  101:     F07A CE 0040                        LDX #counter
  102:     F07D 3C                             PSHX
  103:     F07E BD F090                        JSR S2
  104:                                 
  105:     F081 26 D6                          BNE loop
  106:                                 
  107:                                         ;RESTORE CPU REGISTERS
  108:     F083 CE F000                        LDX #CPUIMG
  109:     F086 A6 02                          LDAA 2,X
  110:     F088 E6 03                          LDAB 3,X
  111:     F08A 1AEE 04                        LDY 4,X
  112:     F08D EE 00                          LDX X
  113:     F08F 39                             RTS
  114:                                 
  115:     F090 38                     S2      PULX ;take the pc off the stack
  116:     F091 1838                           PULY ;take #N of the stack
  117:     F093 3C                             PSHX ;put the pc on the stack
  118:     F094 CDEE 00                        LDX Y ;load the value of N into x
  119:     F097 09                             DEX ;decrement
  120:     F098 CDEF 00                        STX Y ;store the value to #N
  121:     F09B 39                             RTS ;return
